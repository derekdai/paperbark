#!/bin/bash
commands['push']='push snapshot from client to server'

cmd_push_prepare() {
    return
}

cmd_push_exec() {
    read line
    snapshots=($line)
    for (( i=0; i<${#snapshots[@]}; i++)); do
        if ! snapshot_exists "${snapshots[$i]#*@}"; then
            break
        fi
    done

    snapshots=(${snapshots[@]:$i})
    echo ${snapshots[@]}

    for (( i=0; i<${#snapshots[@]}; i++ )); do
        snapshot_receive >$i
    done
}

