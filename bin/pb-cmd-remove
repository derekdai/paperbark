#!/bin/bash

commands['remove']='remove stagging filesystem'
command_alias['rm']='remove'

remove_help() {
    echo """usage:
    $exec_file remove|rm FS
        FS    filesystem acquired by list subcommand
"""
    exit 0
}

cmd_remove_prepare() {
    while [[ 0 != $# ]]; do
        case "$1" in
            -h | --help)
                remove_help
                ;;
            *)
                if [[ -z "$remove_dest" ]]; then
                    remove_dest="$1"
                else
                    echo invalid argument: $1
                    echo
                    remove_help
                fi
                ;;
        esac
        shift
    done

    if [[ -z "$remove_dest" ]]; then
        echo no filesystem specified
        echo
        remove_help
    fi
}

cmd_remove_exec() {
    if fs_exists "$remove_dest" remove_dataset; then
        zfs destroy "$remove_dataset"
    else
        echo filesystem not exists: $remove_dest
    fi
}
